<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Table Module Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .demo-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .demo-section h2 {
            margin-top: 0;
            color: #555;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        
        .demo-description {
            color: #666;
            margin-bottom: 20px;
        }
        
        .table-container {
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            color: #333;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn:hover {
            background: #f0f0f0;
        }
        
        .btn-primary {
            background: #2196f3;
            color: white;
            border-color: #2196f3;
        }
        
        .btn-primary:hover {
            background: #1976d2;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        /* Custom styles for demo */
        .custom-importance {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .custom-importance--high {
            background: #ffebee;
            color: #c62828;
        }
        
        .custom-importance--medium {
            background: #fff3e0;
            color: #ef6c00;
        }
        
        .custom-importance--low {
            background: #e8f5e8;
            color: #2e7d32;
        }
        
        .progress-container {
            position: relative;
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            transition: width 0.3s ease;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: 500;
            color: #333;
        }
        
        .custom-actions {
            display: flex;
            gap: 4px;
            justify-content: center;
        }
        
        .custom-actions .btn {
            padding: 4px 8px;
            font-size: 12px;
        }
        
        .theme-selector {
            margin-bottom: 20px;
        }
        
        .theme-selector select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>PDF Table Module Demo</h1>
        
        <!-- Basic Usage Example -->
        <div class="demo-section">
            <h2>åŸºç¡€ç”¨æ³•</h2>
            <div class="demo-description">
                æœ€ç®€å•çš„è¡¨æ ¼ç”¨æ³•ï¼ŒåŒ…å«åŸºæœ¬çš„æ•°æ®å±•ç¤ºã€æ’åºã€åˆ†é¡µå’Œé€‰æ‹©åŠŸèƒ½ã€‚
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="loadBasicData()">åŠ è½½æ•°æ®</button>
                <button class="btn" onclick="clearBasicData()">æ¸…ç©ºæ•°æ®</button>
                <button class="btn" onclick="getBasicSelection()">è·å–é€‰ä¸­é¡¹</button>
                <button class="btn" onclick="exportBasicData()">å¯¼å‡ºæ•°æ®</button>
            </div>
            <div id="basic-status" class="status info">ç‚¹å‡»"åŠ è½½æ•°æ®"å¼€å§‹æ¼”ç¤º</div>
            <div id="pdf-table-container" class="table-container"></div>
        </div>
        
        <!-- Advanced Configuration Example -->
        <div class="demo-section">
            <h2>é«˜çº§é…ç½®</h2>
            <div class="demo-description">
                å±•ç¤ºé«˜çº§é…ç½®é€‰é¡¹ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰åˆ—ã€ä¸»é¢˜åˆ‡æ¢ã€å¤æ‚äº‹ä»¶å¤„ç†ç­‰ã€‚
            </div>
            <div class="theme-selector">
                <label>é€‰æ‹©ä¸»é¢˜ï¼š</label>
                <select id="theme-selector" onchange="changeTheme(this.value)">
                    <option value="default">é»˜è®¤ä¸»é¢˜</option>
                    <option value="dark">æ·±è‰²ä¸»é¢˜</option>
                    <option value="modern">ç°ä»£ä¸»é¢˜</option>
                    <option value="classic">ç»å…¸ä¸»é¢˜</option>
                    <option value="compact">ç´§å‡‘ä¸»é¢˜</option>
                </select>
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="loadAdvancedData()">åŠ è½½æ•°æ®</button>
                <button class="btn" onclick="addAdvancedFilter()">æ·»åŠ ç­›é€‰</button>
                <button class="btn" onclick="clearAdvancedFilter()">æ¸…é™¤ç­›é€‰</button>
                <button class="btn" onclick="setAdvancedSort()">è®¾ç½®æ’åº</button>
            </div>
            <div id="advanced-status" class="status info">ç‚¹å‡»"åŠ è½½æ•°æ®"å¼€å§‹æ¼”ç¤º</div>
            <div id="pdf-table-advanced" class="table-container"></div>
        </div>
        
        <!-- Custom Renderers Example -->
        <div class="demo-section">
            <h2>è‡ªå®šä¹‰æ¸²æŸ“å™¨</h2>
            <div class="demo-description">
                å±•ç¤ºè‡ªå®šä¹‰æ¸²æŸ“å™¨å’Œæ ¼å¼åŒ–å™¨çš„ä½¿ç”¨ï¼ŒåŒ…æ‹¬è¿›åº¦æ¡ã€è‡ªå®šä¹‰æŒ‰é’®ç­‰ã€‚
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="loadCustomData()">åŠ è½½æ•°æ®</button>
                <button class="btn" onclick="updateCustomData()">æ›´æ–°æ•°æ®</button>
                <button class="btn" onclick="addCustomRow()">æ·»åŠ è¡Œ</button>
            </div>
            <div id="custom-status" class="status info">ç‚¹å‡»"åŠ è½½æ•°æ®"å¼€å§‹æ¼”ç¤º</div>
            <div id="pdf-table-custom" class="table-container"></div>
        </div>
        
        <!-- Dynamic Data Example -->
        <div class="demo-section">
            <h2>åŠ¨æ€æ•°æ®ç®¡ç†</h2>
            <div class="demo-description">
                å±•ç¤ºåŠ¨æ€æ•°æ®æ“ä½œï¼ŒåŒ…æ‹¬æ·»åŠ ã€æ›´æ–°ã€åˆ é™¤è¡Œï¼Œä»¥åŠå®æ—¶æ•°æ®æ›´æ–°ã€‚
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="startDynamicDemo()">å¼€å§‹æ¼”ç¤º</button>
                <button class="btn" onclick="pauseDynamicDemo()">æš‚åœæ¼”ç¤º</button>
                <button class="btn" onclick="stopDynamicDemo()">åœæ­¢æ¼”ç¤º</button>
            </div>
            <div id="dynamic-status" class="status info">ç‚¹å‡»"å¼€å§‹æ¼”ç¤º"æŸ¥çœ‹åŠ¨æ€æ•°æ®æ›´æ–°</div>
            <div id="pdf-table-dynamic" class="table-container"></div>
        </div>
        
        <!-- Real-time Updates Example -->
        <div class="demo-section">
            <h2>å®æ—¶æ›´æ–°</h2>
            <div class="demo-description">
                æ¨¡æ‹Ÿå®æ—¶æ•°æ®æ›´æ–°åœºæ™¯ï¼Œå±•ç¤ºè¡¨æ ¼çš„å“åº”æ€§èƒ½ã€‚
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="startRealtimeDemo()">å¼€å§‹å®æ—¶æ›´æ–°</button>
                <button class="btn" onclick="stopRealtimeDemo()">åœæ­¢æ›´æ–°</button>
            </div>
            <div id="realtime-status" class="status info">ç‚¹å‡»"å¼€å§‹å®æ—¶æ›´æ–°"æŸ¥çœ‹æ•ˆæœ</div>
            <div id="pdf-table-realtime" class="table-container"></div>
        </div>
        
        <!-- Export Example -->
        <div class="demo-section">
            <h2>æ•°æ®å¯¼å‡º</h2>
            <div class="demo-description">
                å±•ç¤ºæ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼Œæ”¯æŒCSVå’ŒJSONæ ¼å¼ã€‚
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="loadExportData()">åŠ è½½æ•°æ®</button>
                <button class="btn" onclick="exportToCSV()">å¯¼å‡ºCSV</button>
                <button class="btn" onclick="exportToJSON()">å¯¼å‡ºJSON</button>
            </div>
            <div id="export-status" class="status info">ç‚¹å‡»"åŠ è½½æ•°æ®"å¼€å§‹æ¼”ç¤º</div>
            <div id="pdf-table-export" class="table-container"></div>
        </div>
    </div>
    
    <!-- Load the PDF Table Module -->
    <script type="module">
        import PDFTable from './common/pdf-table/index.js';
        
        // Sample data
        const sampleData = [
            {
                id: '001',
                filename: 'æœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹.pdf',
                filepath: 'C:\\data\\pdfs\\machine_learning.pdf',
                title: 'æœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹ - ä»å…¥é—¨åˆ°å®è·µ',
                author: 'å¼ ä¸‰',
                subject: 'äººå·¥æ™ºèƒ½',
                keywords: 'æœºå™¨å­¦ä¹ , AI, ç®—æ³•',
                size: 2457600,
                created_time: 1735706550.674962,
                modified_time: 1735210049.2368014,
                page_count: 250,
                tags: ['å­¦ä¹ ', 'AI', 'æŠ€æœ¯'],
                notes: 'å¾ˆå¥½çš„å…¥é—¨æ•™ç¨‹',
                import_date: '2025-01-15T08:30:00.000Z',
                access_date: '2025-01-20T14:45:00.000Z',
                importance: 'high',
                unread_pages: 45,
                total_pages: 250,
                annotations_count: 12,
                cards_count: 28
            },
            {
                id: '002',
                filename: 'æ•°æ®ç»“æ„ä¸ç®—æ³•.pdf',
                filepath: 'C:\\data\\pdfs\\data_structures.pdf',
                title: 'æ•°æ®ç»“æ„ä¸ç®—æ³• - ç»å…¸æ•™æ',
                author: 'æå››',
                subject: 'è®¡ç®—æœºç§‘å­¦',
                keywords: 'æ•°æ®ç»“æ„, ç®—æ³•, ç¼–ç¨‹',
                size: 3789200,
                created_time: 1735706625.1306179,
                modified_time: 1735055630.628513,
                page_count: 420,
                tags: ['ç¼–ç¨‹', 'ç®—æ³•', 'ç»å…¸'],
                notes: 'ç®—æ³•å­¦ä¹ çš„å¿…å¤‡ä¹¦ç±',
                import_date: '2025-01-10T09:15:00.000Z',
                access_date: '2025-01-21T16:20:00.000Z',
                importance: 'high',
                unread_pages: 120,
                total_pages: 420,
                annotations_count: 25,
                cards_count: 56
            },
            {
                id: '003',
                filename: 'æ·±åº¦å­¦ä¹ å®æˆ˜.pdf',
                filepath: 'C:\\data\\pdfs\\deep_learning.pdf',
                title: 'æ·±åº¦å­¦ä¹ å®æˆ˜ - å®æˆ˜é¡¹ç›®è¯¦è§£',
                author: 'ç‹äº”',
                subject: 'æ·±åº¦å­¦ä¹ ',
                keywords: 'æ·±åº¦å­¦ä¹ , ç¥ç»ç½‘ç»œ, å®æˆ˜',
                size: 5123400,
                created_time: 1735706700.1306179,
                modified_time: 1735055700.628513,
                page_count: 350,
                tags: ['æ·±åº¦å­¦ä¹ ', 'ç¥ç»ç½‘ç»œ', 'å®æˆ˜'],
                notes: 'åŒ…å«å¾ˆå¤šå®æˆ˜æ¡ˆä¾‹',
                import_date: '2025-01-08T11:30:00.000Z',
                access_date: '2025-01-19T10:15:00.000Z',
                importance: 'medium',
                unread_pages: 80,
                total_pages: 350,
                annotations_count: 18,
                cards_count: 42
            },
            {
                id: '004',
                filename: 'Pythonç¼–ç¨‹æŒ‡å—.pdf',
                filepath: 'C:\\data\\pdfs\\python_guide.pdf',
                title: 'Pythonç¼–ç¨‹æŒ‡å— - ä»å…¥é—¨åˆ°ç²¾é€š',
                author: 'èµµå…­',
                subject: 'ç¼–ç¨‹è¯­è¨€',
                keywords: 'Python, ç¼–ç¨‹, å…¥é—¨',
                size: 1867200,
                created_time: 1735706800.1306179,
                modified_time: 1735055800.628513,
                page_count: 180,
                tags: ['Python', 'ç¼–ç¨‹', 'å…¥é—¨'],
                notes: 'é€‚åˆåˆå­¦è€…çš„Pythonæ•™ç¨‹',
                import_date: '2025-01-12T14:45:00.000Z',
                access_date: '2025-01-18T09:30:00.000Z',
                importance: 'low',
                unread_pages: 30,
                total_pages: 180,
                annotations_count: 8,
                cards_count: 15
            },
            {
                id: '005',
                filename: 'Webå‰ç«¯å¼€å‘.pdf',
                filepath: 'C:\\data\\pdfs\\web_frontend.pdf',
                title: 'Webå‰ç«¯å¼€å‘ - ç°ä»£æŠ€æœ¯æ ˆ',
                author: 'å­™ä¸ƒ',
                subject: 'å‰ç«¯å¼€å‘',
                keywords: 'å‰ç«¯, JavaScript, HTML, CSS',
                size: 2981500,
                created_time: 1735706900.1306179,
                modified_time: 1735055900.628513,
                page_count: 320,
                tags: ['å‰ç«¯', 'JavaScript', 'Webå¼€å‘'],
                notes: 'æ¶µç›–æœ€æ–°çš„å‰ç«¯æŠ€æœ¯',
                import_date: '2025-01-05T16:20:00.000Z',
                access_date: '2025-01-22T13:10:00.000Z',
                importance: 'medium',
                unread_pages: 95,
                total_pages: 320,
                annotations_count: 22,
                cards_count: 38
            }
        ];
        
        // Table instances
        let basicTable = null;
        let advancedTable = null;
        let customTable = null;
        let dynamicTable = null;
        let realtimeTable = null;
        let exportTable = null;
        
        // Demo control variables
        let dynamicInterval = null;
        let realtimeInterval = null;
        
        // Basic demo functions
        window.loadBasicData = async function() {
            try {
                updateStatus('basic', 'æ­£åœ¨åŠ è½½æ•°æ®...', 'info');
                
                if (!basicTable) {
                    basicTable = new PDFTable('#pdf-table-container', {
                        data: sampleData,
                        pageSize: 5,
                        sortable: true,
                        filterable: true,
                        selectable: true,
                        pagination: true,
                        theme: 'default'
                    });
                    
                    await basicTable.initialize();
                    
                    basicTable.events.on('selection-changed', (selectedRows) => {
                        console.log('Basic table selection changed:', selectedRows);
                    });
                    
                    basicTable.events.on('button-click', ({ action, rowId }) => {
                        console.log(`Basic table button clicked: ${action} on ${rowId}`);
                    });
                }
                
                updateStatus('basic', `æˆåŠŸåŠ è½½ ${sampleData.length} æ¡æ•°æ®`, 'success');
            } catch (error) {
                updateStatus('basic', `åŠ è½½å¤±è´¥: ${error.message}`, 'error');
            }
        };
        
        window.clearBasicData = function() {
            if (basicTable) {
                basicTable.loadData([]);
                updateStatus('basic', 'æ•°æ®å·²æ¸…ç©º', 'info');
            }
        };
        
        window.getBasicSelection = function() {
            if (basicTable) {
                const selected = basicTable.getSelectedRows();
                updateStatus('basic', `é€‰ä¸­äº† ${selected.length} è¡Œæ•°æ®`, 'info');
                console.log('Selected rows:', selected);
            }
        };
        
        window.exportBasicData = function() {
            if (basicTable) {
                basicTable.exportToCSV('basic-table-data.csv');
                updateStatus('basic', 'æ•°æ®å·²å¯¼å‡ºä¸º CSV æ–‡ä»¶', 'success');
            }
        };
        
        // Advanced demo functions
        window.loadAdvancedData = async function() {
            try {
                updateStatus('advanced', 'æ­£åœ¨åŠ è½½æ•°æ®...', 'info');
                
                if (!advancedTable) {
                    const config = {
                        columns: [
                            { id: 'select', title: 'é€‰æ‹©', field: 'select', width: 50, align: 'center' },
                            { id: 'filename', title: 'æ–‡ä»¶å', field: 'filename', width: 200, sortable: true },
                            { id: 'title', title: 'æ ‡é¢˜', field: 'title', width: 250, sortable: true },
                            { id: 'size', title: 'å¤§å°', field: 'size', width: 100, align: 'right', sortable: true },
                            { id: 'import_date', title: 'å¯¼å…¥æ—¥æœŸ', field: 'import_date', width: 120, sortable: true },
                            { id: 'importance', title: 'é‡è¦æ€§', field: 'importance', width: 100, sortable: true },
                            { id: 'actions', title: 'æ“ä½œ', field: 'actions', width: 120, align: 'center' }
                        ],
                        data: sampleData,
                        pageSize: 5,
                        sortable: true,
                        filterable: true,
                        selectable: true,
                        pagination: true,
                        theme: 'default',
                        multiSelect: true,
                        rowClickSelect: true
                    };
                    
                    advancedTable = new PDFTable('#pdf-table-advanced', config);
                    await advancedTable.initialize();
                    
                    advancedTable.events.on('button-click', ({ action, rowId }) => {
                        if (action === 'open') {
                            alert(`æ‰“å¼€æ–‡ä»¶: ${rowId}`);
                        } else if (action === 'delete') {
                            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ–‡ä»¶å—ï¼Ÿ')) {
                                advancedTable.removeRow(rowId);
                            }
                        }
                    });
                }
                
                updateStatus('advanced', `æˆåŠŸåŠ è½½ ${sampleData.length} æ¡æ•°æ®`, 'success');
            } catch (error) {
                updateStatus('advanced', `åŠ è½½å¤±è´¥: ${error.message}`, 'error');
            }
        };
        
        window.changeTheme = function(theme) {
            if (advancedTable) {
                advancedTable.setTheme(theme);
                updateStatus('advanced', `ä¸»é¢˜å·²åˆ‡æ¢ä¸º: ${theme}`, 'success');
            }
        };
        
        window.addAdvancedFilter = function() {
            if (advancedTable) {
                advancedTable.filtering.addTextFilter('importance', 'equals', 'high');
                updateStatus('advanced', 'å·²æ·»åŠ é‡è¦æ€§ç­›é€‰: é«˜', 'success');
            }
        };
        
        window.clearAdvancedFilter = function() {
            if (advancedTable) {
                advancedTable.filtering.clearAllFilters();
                updateStatus('advanced', 'å·²æ¸…é™¤æ‰€æœ‰ç­›é€‰', 'success');
            }
        };
        
        window.setAdvancedSort = function() {
            if (advancedTable) {
                advancedTable.sorting.setSort('import_date', 'desc');
                updateStatus('advanced', 'å·²è®¾ç½®æ’åº: å¯¼å…¥æ—¥æœŸé™åº', 'success');
            }
        };
        
        // Custom renderers demo functions
        window.loadCustomData = async function() {
            try {
                updateStatus('custom', 'æ­£åœ¨åŠ è½½æ•°æ®...', 'info');
                
                if (!customTable) {
                    const config = {
                        columns: [
                            { id: 'filename', title: 'æ–‡ä»¶å', field: 'filename', width: 200 },
                            { 
                                id: 'size', 
                                title: 'å¤§å°', 
                                field: 'size', 
                                width: 100, 
                                align: 'right',
                                formatter: (value) => {
                                    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                                    const i = Math.floor(Math.log(value) / Math.log(1024));
                                    return parseFloat((value / Math.pow(1024, i)).toFixed(2)) + ' ' + sizes[i];
                                }
                            },
                            { 
                                id: 'importance', 
                                title: 'é‡è¦æ€§', 
                                field: 'importance', 
                                width: 120,
                                renderer: (value, row, column) => {
                                    const icons = {
                                        high: 'ğŸ”¥',
                                        medium: 'â­',
                                        low: 'ğŸ“'
                                    };
                                    return `<span class="custom-importance custom-importance--${value}">
                                        ${icons[value]} ${value}
                                    </span>`;
                                }
                            },
                            { 
                                id: 'progress', 
                                title: 'é˜…è¯»è¿›åº¦', 
                                field: 'unread_pages', 
                                width: 150,
                                renderer: (value, row, column) => {
                                    const total = row.total_pages;
                                    const read = total - value;
                                    const percentage = total > 0 ? Math.round((read / total) * 100) : 0;
                                    
                                    return `
                                        <div class="progress-container">
                                            <div class="progress-bar" style="width: ${percentage}%"></div>
                                            <span class="progress-text">${percentage}%</span>
                                        </div>
                                    `;
                                }
                            },
                            { 
                                id: 'actions', 
                                title: 'æ“ä½œ', 
                                field: 'actions', 
                                width: 150,
                                renderer: (value, row, column) => {
                                    return `
                                        <div class="custom-actions">
                                            <button class="btn btn-primary" onclick="viewFile('${row.id}')">æŸ¥çœ‹</button>
                                            <button class="btn" onclick="editFile('${row.id}')">ç¼–è¾‘</button>
                                            <button class="btn" style="background: #f44; color: white;" onclick="deleteFile('${row.id}')">åˆ é™¤</button>
                                        </div>
                                    `;
                                }
                            }
                        ],
                        data: sampleData,
                        pageSize: 5,
                        theme: 'modern'
                    };
                    
                    customTable = new PDFTable('#pdf-table-custom', config);
                    await customTable.initialize();
                }
                
                updateStatus('custom', `æˆåŠŸåŠ è½½ ${sampleData.length} æ¡æ•°æ®`, 'success');
            } catch (error) {
                updateStatus('custom', `åŠ è½½å¤±è´¥: ${error.message}`, 'error');
            }
        };
        
        window.updateCustomData = function() {
            if (customTable) {
                // éšæœºæ›´æ–°ä¸€äº›æ•°æ®
                const randomIndex = Math.floor(Math.random() * sampleData.length);
                const randomRow = sampleData[randomIndex];
                
                customTable.updateRow(randomRow.id, {
                    unread_pages: Math.max(0, randomRow.unread_pages - 5),
                    access_date: new Date().toISOString()
                });
                
                updateStatus('custom', `å·²æ›´æ–°æ•°æ®: ${randomRow.title}`, 'success');
            }
        };
        
        window.addCustomRow = function() {
            if (customTable) {
                const newRow = {
                    id: '006',
                    filename: 'æ–°æ·»åŠ çš„æ–‡æ¡£.pdf',
                    filepath: 'C:\\data\\pdfs\\new_document.pdf',
                    title: 'æ–°æ·»åŠ çš„æ–‡æ¡£',
                    size: 1024000,
                    import_date: new Date().toISOString(),
                    importance: 'medium',
                    unread_pages: 0,
                    total_pages: 100,
                    annotations_count: 0,
                    cards_count: 0
                };
                
                customTable.addRow(newRow);
                updateStatus('custom', 'å·²æ·»åŠ æ–°è¡Œ', 'success');
            }
        };
        
        // Dynamic demo functions
        window.startDynamicDemo = async function() {
            try {
                updateStatus('dynamic', 'æ­£åœ¨å¯åŠ¨åŠ¨æ€æ¼”ç¤º...', 'info');
                
                if (!dynamicTable) {
                    dynamicTable = new PDFTable('#pdf-table-dynamic', {
                        data: [],
                        pageSize: 5,
                        sortable: true,
                        selectable: true,
                        pagination: true
                    });
                    
                    await dynamicTable.initialize();
                }
                
                let counter = 0;
                dynamicInterval = setInterval(() => {
                    counter++;
                    
                    if (counter <= 5) {
                        // æ·»åŠ æ•°æ®
                        const row = sampleData[counter - 1];
                        dynamicTable.addRow(row);
                        updateStatus('dynamic', `å·²æ·»åŠ æ•°æ®: ${row.title}`, 'success');
                    } else if (counter <= 10) {
                        // æ›´æ–°æ•°æ®
                        const randomIndex = Math.floor(Math.random() * 5);
                        const randomRow = sampleData[randomIndex];
                        dynamicTable.updateRow(randomRow.id, {
                            access_date: new Date().toISOString(),
                            unread_pages: Math.max(0, randomRow.unread_pages - 1)
                        });
                        updateStatus('dynamic', `å·²æ›´æ–°æ•°æ®: ${randomRow.title}`, 'success');
                    } else {
                        // åˆ é™¤æ•°æ®
                        if (dynamicTable.getData().length > 0) {
                            const data = dynamicTable.getData();
                            const randomRow = data[Math.floor(Math.random() * data.length)];
                            dynamicTable.removeRow(randomRow.id);
                            updateStatus('dynamic', `å·²åˆ é™¤æ•°æ®: ${randomRow.title}`, 'success');
                        } else {
                            window.stopDynamicDemo();
                        }
                    }
                }, 2000);
                
                updateStatus('dynamic', 'åŠ¨æ€æ¼”ç¤ºå·²å¯åŠ¨', 'success');
            } catch (error) {
                updateStatus('dynamic', `å¯åŠ¨å¤±è´¥: ${error.message}`, 'error');
            }
        };
        
        window.pauseDynamicDemo = function() {
            if (dynamicInterval) {
                clearInterval(dynamicInterval);
                dynamicInterval = null;
                updateStatus('dynamic', 'åŠ¨æ€æ¼”ç¤ºå·²æš‚åœ', 'info');
            }
        };
        
        window.stopDynamicDemo = function() {
            if (dynamicInterval) {
                clearInterval(dynamicInterval);
                dynamicInterval = null;
            }
            updateStatus('dynamic', 'åŠ¨æ€æ¼”ç¤ºå·²åœæ­¢', 'info');
        };
        
        // Real-time demo functions
        window.startRealtimeDemo = async function() {
            try {
                updateStatus('realtime', 'æ­£åœ¨å¯åŠ¨å®æ—¶æ›´æ–°...', 'info');
                
                if (!realtimeTable) {
                    realtimeTable = new PDFTable('#pdf-table-realtime', {
                        data: [...sampleData],
                        pageSize: 5,
                        sortable: true,
                        selectable: true,
                        pagination: true
                    });
                    
                    await realtimeTable.initialize();
                }
                
                let updateCounter = 0;
                realtimeInterval = setInterval(() => {
                    updateCounter++;
                    
                    // éšæœºæ›´æ–°ä¸€è¡Œæ•°æ®
                    const randomIndex = Math.floor(Math.random() * sampleData.length);
                    const randomRow = sampleData[randomIndex];
                    
                    realtimeTable.updateRow(randomRow.id, {
                        access_date: new Date().toISOString(),
                        annotations_count: (randomRow.annotations_count || 0) + 1
                    });
                    
                    if (updateCounter % 5 === 0) {
                        updateStatus('realtime', `å·²è¿›è¡Œ ${updateCounter} æ¬¡å®æ—¶æ›´æ–°`, 'success');
                    }
                }, 1000);
                
                updateStatus('realtime', 'å®æ—¶æ›´æ–°å·²å¯åŠ¨', 'success');
            } catch (error) {
                updateStatus('realtime', `å¯åŠ¨å¤±è´¥: ${error.message}`, 'error');
            }
        };
        
        window.stopRealtimeDemo = function() {
            if (realtimeInterval) {
                clearInterval(realtimeInterval);
                realtimeInterval = null;
            }
            updateStatus('realtime', 'å®æ—¶æ›´æ–°å·²åœæ­¢', 'info');
        };
        
        // Export demo functions
        window.loadExportData = async function() {
            try {
                updateStatus('export', 'æ­£åœ¨åŠ è½½æ•°æ®...', 'info');
                
                if (!exportTable) {
                    exportTable = new PDFTable('#pdf-table-export', {
                        data: sampleData,
                        pageSize: 10,
                        exportEnabled: true,
                        theme: 'default'
                    });
                    
                    await exportTable.initialize();
                }
                
                updateStatus('export', `æˆåŠŸåŠ è½½ ${sampleData.length} æ¡æ•°æ®`, 'success');
            } catch (error) {
                updateStatus('export', `åŠ è½½å¤±è´¥: ${error.message}`, 'error');
            }
        };
        
        window.exportToCSV = function() {
            if (exportTable) {
                exportTable.exportToCSV('pdf-data.csv');
                updateStatus('export', 'æ•°æ®å·²å¯¼å‡ºä¸º CSV æ–‡ä»¶', 'success');
            }
        };
        
        window.exportToJSON = function() {
            if (exportTable) {
                const data = exportTable.getData();
                const jsonData = JSON.stringify(data, null, 2);
                const blob = new Blob([jsonData], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'pdf-data.json';
                a.click();
                URL.revokeObjectURL(url);
                updateStatus('export', 'æ•°æ®å·²å¯¼å‡ºä¸º JSON æ–‡ä»¶', 'success');
            }
        };
        
        // Utility functions
        function updateStatus(section, message, type) {
            const statusElement = document.getElementById(`${section}-status`);
            if (statusElement) {
                statusElement.textContent = message;
                statusElement.className = `status ${type}`;
            }
        }
        
        // Action functions for custom renderers
        window.viewFile = function(rowId) {
            alert(`æŸ¥çœ‹æ–‡ä»¶: ${rowId}`);
        };
        
        window.editFile = function(rowId) {
            alert(`ç¼–è¾‘æ–‡ä»¶: ${rowId}`);
        };
        
        window.deleteFile = function(rowId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ–‡ä»¶å—ï¼Ÿ')) {
                alert(`åˆ é™¤æ–‡ä»¶: ${rowId}`);
            }
        };
        
        // Initialize page
        console.log('PDF Table Module Demo loaded');
    </script>
</body>
</html>