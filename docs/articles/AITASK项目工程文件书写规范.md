# AITASK项目工程文件书写规范

本文档定义了AITASK项目中所有工程文件的标准格式要求，确保文档的一致性、可读性和可维护性。

## 文件命名规范

所有文件必须遵循以下命名格式：
```
[YYYYMMDDhhmmss]-[文档类型].md
```
- YYYYMMDDhhmmss：14位时间戳，精确到秒
- 文档类型：使用中文描述，如"需求对齐文档"、"架构说明"等

## 通用文档格式

### 头部元数据
每个文档必须在开头包含以下元数据：

```markdown
---
title: [文档标题]
author: [作者/AI助手标识]
created: [YYYY-MM-DD hh:mm:ss UTC+8]
version: [版本号，如v1.0.0]
source_inputs: [输入文档列表，用逗号分隔]
project: [项目编号-项目名称]
iteration: [v版本号]
tags: [标签列表，用逗号分隔]
---
```

### 文档结构
所有文档必须包含以下结构：

1. **文档概述**（一级标题）
   - 文档目的
   - 适用范围
   - 预期读者

2. **输入依赖**（一级标题）
   - 上游文档列表（带路径）
   - 外部约束条件
   - 前置条件

3. **主要内容**（一级标题）
   - 根据文档类型展开详细内容

4. **输出交付**（一级标题）
   - 下游文档列表
   - 交付物清单
   - 验收标准

5. **版本历史**（一级标题）
   - 变更记录表格

---

## 具体文档格式要求

### 1. 需求对齐文档
**文件路径**: `AITASK/[序号]-[项目名]/[YYYYMMDDhhmmss]-需求对齐文档.md`

#### 文档结构
```markdown
## 原始需求描述
[用户原始需求文本]

## 需求澄清
### 功能需求
- [需求1]: [详细描述]
- [需求2]: [详细描述]

### 非功能需求
- 性能要求: [具体指标]
- 安全要求: [具体标准]
- 兼容性要求: [具体说明]

## 需求优先级
| 优先级 | 需求项 | 说明 |
|--------|--------|------|
| P0     | [需求] | [说明] |
| P1     | [需求] | [说明] |

## 需求边界
- 明确包含的功能
- 明确排除的功能
- 技术约束条件

## 验收标准
- 功能验收标准
- 性能验收标准
- 用户体验标准
```

### 2. 共识确认文档
**文件路径**: `AITASK/[序号]-[项目名]/[YYYYMMDDhhmmss]-共识确认文档.md`

#### 文档结构
```markdown
## 需求确认
- [需求1]: [确认状态] - [确认人/时间]
- [需求2]: [确认状态] - [确认人/时间]

## 技术路线共识
### 技术栈选择
- 前端: [技术栈及版本]
- 后端: [技术栈及版本]
- 数据库: [类型及版本]

### 架构风格
- [架构模式]: [选择理由]

## 开发约束共识
- 代码规范: [标准名称]
- 测试覆盖率: [最低要求]
- 部署环境: [环境描述]

## 风险共识
| 风险项 | 影响程度 | 应对策略 | 责任人 |
|--------|----------|----------|--------|
| [风险] | [高/中/低] | [策略] | [责任人] |

## 变更管理
- 变更流程: [流程描述]
- 决策机制: [机制描述]
```

### 3. 原型迭代目标说明文档
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[YYYYMMDDhhmmss]-原型迭代目标说明.md`

#### 文档结构
```markdown
## 版本目标
### v[版本号] 核心目标
- **目标描述**: [该版本要实现的核心业务目标]
- **用户价值**: [为用户解决的具体问题]
- **业务价值**: [对业务的具体贡献]

### 功能目标
| 功能模块 | 目标描述 | 验收标准 | 优先级 |
|----------|----------|----------|--------|
| [模块1] | [具体目标] | [可测量标准] | [P0/P1/P2] |
| [模块2] | [具体目标] | [可测量标准] | [P0/P1/P2] |

### 技术目标
- **架构目标**: [该版本要实现的架构改进]
- **性能目标**: [具体性能指标]
- **质量目标**: [代码质量/测试覆盖率等要求]

## 版本边界
### 明确包含
- [功能点1]: [详细描述]
- [功能点2]: [详细描述]

### 明确排除
- [功能点1]: [排除原因]
- [功能点2]: [排除原因]

### 技术约束
- [约束1]: [具体限制]
- [约束2]: [具体限制]

## 成功标准
| 维度 | 指标 | 目标值 | 验证方法 |
|------|------|--------|----------|
| 功能 | [指标1] | [数值] | [验证方式] |
| 性能 | [指标2] | [数值] | [验证方式] |
| 质量 | [指标3] | [数值] | [验证方式] |

## 风险识别
| 风险项 | 影响程度 | 应对策略 | 备选方案 |
|--------|----------|----------|----------|
| [风险1] | [高/中/低] | [策略] | [备选] |
| [风险2] | [高/中/低] | [策略] | [备选] |
```

### 4. 架构说明
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[YYYYMMDDhhmmss]-架构说明.md`

#### 文档结构
```markdown
    ## 架构概览
    ### 系统架构图
    ```mermaid
    [架构图]
    ```
    ### 架构风格
    - 架构模式: [模式名称]
    - 设计原则: [原则列表]

    ## 组件设计
    ### 核心组件
    #### [组件名称]
    - **职责**: [职责描述]
    - **接口**: [接口列表]
    - **依赖**: [依赖组件]
    - **部署位置**: [部署信息]

    ### 数据流
    ```mermaid
    [数据流图]
    ```

    ## 技术选型
    | 层级 | 技术 | 版本 | 选择理由 |
    |------|------|------|----------|
    | 前端 | [技术] | [版本] | [理由] |
    | 后端 | [技术] | [版本] | [理由] |
    | 数据库 | [技术] | [版本] | [理由] |

    ## 接口设计
    ### API接口
    #### [接口名称]
    - **路径**: [URL路径]
    - **方法**: [HTTP方法]
    - **请求参数**: [参数列表]
    - **响应格式**: [格式描述]
    - **错误码**: [错误码列表]

    ## 部署架构
    ### 部署拓扑
    ```mermaid
    [部署图]
    ```

    ### 环境配置
    | 环境 | 配置 | 说明 |
    |------|------|------|
    | 开发 | [配置] | [说明] |
    | 测试 | [配置] | [说明] |
    | 生产 | [配置] | [说明] |

    ## 非功能设计
    ### 性能设计
    - [设计点1]: [描述]
    - [设计点2]: [描述]

    ### 安全设计
    - [设计点1]: [描述]
    - [设计点2]: [描述]

    ## 风险与权衡
    | 风险点 | 影响 | 缓解措施 |
    |--------|------|----------|
    | [风险] | [描述] | [措施] |
```

### 5. 规范说明
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[YYYYMMDDhhmmss]-规范说明.md`

#### 文档结构
```markdown
    ## 编码规范
    ### 命名规范
    - 变量命名: [规则]
    - 函数命名: [规则]
    - 类命名: [规则]
    - 文件命名: [规则]

    ### 代码风格
    - 缩进: [空格/Tab]
    - 行长度: [字符数]
    - 注释规范: [标准]

    ## API规范
    ### RESTful设计
    - URL设计: [规则]
    - HTTP方法: [使用规范]
    - 状态码: [使用规范]

    ### 请求/响应格式
    - 请求格式: [JSON/XML等]
    - 响应格式: [标准结构]
    - 错误响应: [标准格式]

    ## 数据规范
    ### 数据库规范
    - 表命名: [规则]
    - 字段命名: [规则]
    - 索引规范: [规则]

    ### 数据验证
    - 输入验证: [规则]
    - 输出格式化: [规则]

    ## 测试规范
    ### 测试类型
    - 单元测试: [覆盖率要求]
    - 集成测试: [覆盖率要求]
    - 端到端测试: [场景要求]

    ### 测试命名
    - 测试文件: [命名规则]
    - 测试函数: [命名规则]

    ## 文档规范
    ### 代码注释
    - 函数注释: [模板]
    - 类注释: [模板]
    - 模块注释: [模板]

    ### API文档
    - 文档格式: [OpenAPI/Swagger等]
    - 更新频率: [要求]

    ## 性能规范
    ### 响应时间
    - API响应: [最大时间]
    - 页面加载: [最大时间]

    ### 资源使用
    - 内存使用: [限制]
    - CPU使用: [限制]

    ## 安全规范
    ### 认证授权
    - 认证方式: [JWT/OAuth等]
    - 权限模型: [RBAC等]

    ### 数据安全
    - 加密要求: [算法/标准]
    - 敏感数据处理: [规则]
```

### 6. 架构与规范一致性验收报告
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[YYYYMMDDhhmmss]-架构规范一致性验收报告.md`

#### 文档结构
```markdown
    ## 验收概览
    - 验收状态: [通过/不通过]
    - 验收时间: [时间]
    - 验收人: [标识]

    ## 一致性检查结果
    ### 通过项
    | 检查项 | 状态 | 说明 |
    |--------|------|------|
    | [检查项] | 通过 | [说明] |

    ### 冲突项
    | 冲突ID | 冲突描述 | 严重程度 | 影响范围 | 修复建议 |
    |--------|----------|----------|----------|----------|
    | [ID] | [描述] | [高/中/低] | [范围] | [建议] |

    ## 修复计划
    | 冲突ID | 修复优先级 | 预计工时 | 责任人 |
    |--------|------------|----------|--------|
    | [ID] | [优先级] | [工时] | [责任人] |

    ## 验收结论
    - 总体评价: [评价]
    - 后续行动: [行动项]
```

### 7. 宏观任务汇总
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[YYYYMMDDhhmmss]-宏观任务汇总.md`

#### 文档结构
```markdown
    ## 宏观任务列表
    ### [宏观任务编号]: [任务名称]
    - **任务描述**: [详细描述]
    - **业务价值**: [价值说明]
    - **技术挑战**: [挑战描述]
    - **依赖关系**: [依赖任务]
    - **预估工时**: [人天]
    - **风险等级**: [高/中/低]

    ## 任务优先级矩阵
    | 任务编号 | 业务价值 | 技术难度 | 优先级 | 排序 |
    |----------|----------|----------|--------|------|
    | [编号] | [高/中/低] | [高/中/低] | [P0/P1/P2] | [序号] |

    ## 任务依赖图
    ```mermaid
    [依赖关系图]
    ```

    ## 资源需求
    | 任务编号 | 前端 | 后端 | 测试 | 运维 |
    |----------|------|------|------|------|
    | [编号] | [人天] | [人天] | [人天] | [人天] |
```

### 8. 原子任务汇总
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[YYYYMMDDhhmmss]-原子任务汇总.md`

#### 文档结构
```markdown
    ## 原子任务列表
    ### [原子任务编号]: [任务名称]
    - **所属宏观任务**: [宏观任务编号]
    - **任务描述**: [一句话描述]
    - **输入**: [输入数据/接口]
    - **输出**: [输出数据/接口]
    - **完成定义(DoD)**: [验收标准]
    - **预估工时**: [小时]
    - **技术栈**: [技术列表]

    ## 任务分组建议
    | 原子任务编号 | 建议分组 | 分组理由 |
    |--------------|----------|----------|
    | [编号] | [组号] | [理由] |

    ## 任务复杂度分析
    | 原子任务编号 | 复杂度等级 | 关键路径 | 阻塞风险 |
    |--------------|------------|----------|----------|
    | [编号] | [高/中/低] | [是/否] | [高/中/低] |
```

### 9. 分组任务汇总
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[YYYYMMDDhhmmss]-分组任务汇总.md`

#### 文档结构
```markdown
    ## 分组方案
    ### [分组编号]: [分组名称]
    - **分组目标**: [目标描述]
    - **包含原子任务**: [任务列表]
    - **组内依赖**: [依赖关系]
    - **组间依赖**: [外部依赖]
    - **预计工期**: [天数]

    ## 分组合理性分析
    | 分组编号 | 内聚度 | 耦合度 | 风险等级 | 优化建议 |
    |----------|--------|--------|----------|----------|
    | [编号] | [高/中/低] | [高/中/低] | [等级] | [建议] |

    ## 执行顺序
    ```mermaid
    [执行流程图]
    ```

    ## 资源分配
    | 分组编号 | 负责人 | 参与人员 | 开始时间 | 结束时间 |
    |----------|--------|----------|----------|----------|
    | [编号] | [人员] | [列表] | [日期] | [日期] |
```

### 10. 分组任务说明
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[任务组别编号]/[YYYYMMDDhhmmss]-分组任务说明.md`

#### 文档结构
```markdown
    ## 分组概述
    - **分组编号**: [编号]
    - **分组名称**: [名称]
    - **分组目标**: [目标描述]
    - **业务价值**: [价值说明]

    ## 任务清单
    ### [原子任务编号]: [任务名称]
    - **任务描述**: [详细描述]
    - **前置条件**: [条件列表]
    - **后置影响**: [影响范围]
    - **验收标准**: [DoD详细描述]
    - **风险点**: [风险描述]

    ## 技术方案
    ### 整体架构
    - [架构描述]

    ### 关键技术点
    - [技术点1]: [解决方案]
    - [技术点2]: [解决方案]

    ## 测试策略
    - 测试范围: [范围描述]
    - 测试重点: [重点说明]
    - 测试环境: [环境要求]

    ## 交付物清单
    | 交付物类型 | 文件名 | 完成状态 |
    |------------|--------|----------|
    | [类型] | [文件名] | [状态] |
```

### 11. 原子任务说明
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[任务组别编号]/[YYYYMMDDhhmmss]-[原子任务编号]-原子任务说明.md`

#### 文档结构
```markdown
    ## 任务基本信息
    - **原子任务编号**: [编号]
    - **任务名称**: [名称]
    - **所属宏观任务**: [宏观任务编号]
    - **所属分组**: [分组编号]
    - **任务类型**: [开发/测试/配置等]

    ## 任务描述
    ### 业务背景
    [背景描述]

    ### 技术需求
    - **功能需求**: [详细描述]
    - **非功能需求**: [性能/安全等要求]

    ## 技术方案
    ### 实现思路
    [实现方案描述]

    ### 关键算法/逻辑
    ```pseudo
    [算法描述]
    ```

    ### 数据结构
    - **输入数据**: [结构描述]
    - **输出数据**: [结构描述]

    ## 接口定义
    ### 输入接口
    - **接口名称**: [名称]
    - **参数**: [参数列表及类型]
    - **返回值**: [返回类型及说明]

    ### 输出接口
    - **接口名称**: [名称]
    - **参数**: [参数列表及类型]
    - **返回值**: [返回类型及说明]

    ## 测试要求
    ### 单元测试
    - **测试场景**: [场景列表]
    - **覆盖率要求**: [百分比]

    ### 集成测试
    - **测试场景**: [场景列表]
    - **测试数据**: [数据描述]

    ## 实现约束
    - **技术约束**: [约束列表]
    - **时间约束**: [时间要求]
    - **资源约束**: [资源限制]

    ## 验收标准(DoD)
    - [ ] 代码实现完成并通过单元测试
    - [ ] 代码审查通过
    - [ ] 文档更新完成
    - [ ] 性能测试通过
    - [ ] 安全扫描通过
    ```

    ### 12. 测试用例说明
    **文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[任务组别编号]/[YYYYMMDDhhmmss]-[原子任务编号]-测试用例说明.md`

    #### 文档结构
    ```markdown
    ## 测试概述
    - **测试目标**: [目标描述]
    - **测试范围**: [范围描述]
    - **测试类型**: [单元/集成/端到端]

    ## 测试用例列表
    ### [用例编号]: [用例名称]
    - **前置条件**: [条件描述]
    - **测试步骤**:
    1. [步骤1]
    2. [步骤2]
    3. [步骤3]
    - **预期结果**: [结果描述]
    - **测试数据**: [数据描述]
    - **优先级**: [高/中/低]
    - **自动化**: [是/否]

    ## 测试数据
    ### 正常数据
    - [数据1]: [描述]
    - [数据2]: [描述]

    ### 边界数据
    - [数据1]: [描述]
    - [数据2]: [描述]

    ### 异常数据
    - [数据1]: [描述]
    - [数据2]: [描述]

    ## 测试环境
    - **硬件环境**: [配置描述]
    - **软件环境**: [版本列表]
    - **测试工具**: [工具列表]

    ## 测试执行计划
    | 用例编号 | 执行顺序 | 预计时间 | 执行人 |
    |----------|----------|----------|--------|
    | [编号] | [序号] | [分钟] | [人员] |
    ```

    ### 13. API用例说明
    **文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[任务组别编号]/[YYYYMMDDhhmmss]-[原子任务编号]-API用例说明.md`

    #### 文档结构
    ```markdown
    ## API概述
    - **API名称**: [名称]
    - **API描述**: [功能描述]
    - **API版本**: [版本号]
    - **基础URL**: [URL]

    ## 接口列表
    ### [接口名称]
    - **HTTP方法**: [GET/POST/PUT/DELETE等]
    - **路径**: [完整路径]
    - **描述**: [功能描述]

    #### 请求参数
    ##### 路径参数
    | 参数名 | 类型 | 必填 | 描述 |
    |--------|------|------|------|
    | [参数] | [类型] | [是/否] | [描述] |

    ##### 查询参数
    | 参数名 | 类型 | 必填 | 描述 | 示例 |
    |--------|------|------|------|------|
    | [参数] | [类型] | [是/否] | [描述] | [示例] |

    ##### 请求体
    ```json
    {
    "字段1": "类型 - 描述",
    "字段2": "类型 - 描述"
    }
    ```

    #### 响应格式
    ##### 成功响应
    **状态码**: [200/201等]
    ```json
    {
    "字段1": "类型 - 描述",
    "字段2": "类型 - 描述"
    }
    ```

    ##### 错误响应
    **状态码**: [4xx/5xx]
    ```json
    {
    "error": {
        "code": "错误码",
        "message": "错误消息",
        "details": "详细信息"
    }
    }
    ```

    #### 使用示例
    ##### 请求示例
    ```bash
    curl -X [方法] [URL] \
    -H "Content-Type: application/json" \
    -d '[请求体]'
    ```

    ##### 响应示例
    ```json
    [响应示例]
    ```

    ## 错误码说明
    | 错误码 | 描述 | 解决方案 |
    |--------|------|----------|
    | [CODE] | [描述] | [解决方案] |
```

### 14. 测试验证报告
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[YYYYMMDDhhmmss]-测试验证报告.md`

#### 文档结构
```markdown
    ## 测试概览
    - **测试范围**: [范围描述]
    - **测试时间**: [开始时间] - [结束时间]
    - **测试环境**: [环境描述]
    - **测试工具**: [工具列表]

    ## 测试结果统计
    | 测试类型 | 总用例数 | 通过数 | 失败数 | 通过率 | 覆盖率 |
    |----------|----------|--------|--------|--------|--------|
    | 单元测试 | [数量] | [数量] | [数量] | [百分比] | [百分比] |
    | 集成测试 | [数量] | [数量] | [数量] | [百分比] | [百分比] |

    ## 缺陷统计
    | 严重等级 | 数量 | 占比 | 主要分布 |
    |----------|------|------|----------|
    | 阻塞 | [数量] | [百分比] | [模块] |
    | 严重 | [数量] | [百分比] | [模块] |
    | 一般 | [数量] | [百分比] | [模块] |
    | 轻微 | [数量] | [百分比] | [模块] |

    ## 缺陷详情
    ### [缺陷编号]: [缺陷标题]
    - **严重等级**: [等级]
    - **发现阶段**: [阶段]
    - **复现步骤**:
    1. [步骤1]
    2. [步骤2]
    - **预期结果**: [结果]
    - **实际结果**: [结果]
    - **根因分析**: [分析]
    - **修复建议**: [建议]

    ## 性能测试结果
    | 测试场景 | 指标 | 目标值 | 实际值 | 结果 |
    |----------|------|--------|--------|------|
    | [场景] | [指标] | [目标] | [实际] | [通过/失败] |

    ## 测试结论
    - **总体评价**: [评价]
    - **发布建议**: [建议]
    - **风险提醒**: [提醒]
    - **后续行动**: [行动项]
```

### 15. 迭代验收报告
**文件路径**: `AITASK/[序号]-[项目名]/v[版本号]/[YYYYMMDDhhmmss]-迭代验收报告.md`

#### 文档结构
```markdown
## 验收概览
- **迭代版本**: [版本号]
- **验收时间**: [时间]
- **验收人**: [人员列表]

## 需求满足度
| 需求项 | 实现状态 | 满足度 | 备注 |
|--------|----------|--------|------|
| [需求] | [已实现/部分实现/未实现] | [百分比] | [说明] |

## 质量门禁检查
| 门禁项 | 标准 | 实际值 | 结果 |
|--------|------|--------|------|
| 测试覆盖率 | [百分比] | [百分比] | [通过/失败] |
| 代码规范 | [标准] | [检查结果] | [通过/失败] |
| 性能指标 | [指标] | [实际值] | [通过/失败] |

## 缺陷状态
| 缺陷总数 | 已修复 | 遗留 | 遗留风险 |
|----------|--------|------|----------|
| [数量] | [数量] | [数量] | [风险描述] |

## 发布准备度
- **代码完整性**: [评价]
- **文档完整性**: [评价]
- **环境准备**: [评价]
- **回滚方案**: [评价]

## 验收结论
- **验收结果**: [通过/有条件通过/不通过]
- **发布建议**: [立即发布/延迟发布/拒绝发布]
- **后续行动**: [行动项列表]
```

## 附录：文档模板使用说明

### 模板变量说明
- `[方括号]`：表示需要替换的具体内容
- `可选内容`：用括号标注，表示可根据实际情况选择使用

### 图表规范
- 使用Mermaid语法绘制图表
- 图表必须有标题和说明
- 复杂图表需要分步骤解释

### 表格规范
- 使用标准Markdown表格格式
- 表头必须清晰描述列内容
- 数值型数据需要标明单位

### 代码规范
- 使用适当的代码块语法高亮
- 复杂代码需要添加注释
- 配置文件需要说明每个配置项的作用

### 版本管理
- 每次修改必须更新版本号
- 重大变更需要在版本历史中详细记录
- 废弃的内容需要标记为[已废弃]而不是删除