---
title: 规范检查报告（模板）
author: Spec-Verifier
file_version: 1.0
input:
  - AITASK/[序号-项目名]/v[版本号]/[YYYYMMDDhhmmss]-规范说明.md
  - AITASK/[序号-项目名]/v[版本号]/[YYYYMMDDhhmmss]-代码工件路径
usage: 记录规范验证的结果、违规清单、严重度与修复建议，供 Group-Job-Manager 与 ArchSpec-Manager 使用
---

# 概要
本报告为规范检查（Spec-Verifier）输出的标准化模板。概述验证结论摘要、总体通过率与关键阻塞项。

## 验证结论摘要
- 总体结论：待填写（合格 / 不合格 / 有条件合格）
- 总体通过率：待填写（例如 87%）
- 关键阻塞项数量：待填写

# 输入与前提
- 规范说明：参见 [`docs/articles/开发流程设计.md`](docs/articles/开发流程设计.md:1)、[`templates/规范说明.md`](templates/规范说明.md:1)
- 代码工件版本：填写代码仓库路径与提交/构建版本
- 验证工具及版本：Spec-Verifier vX.Y、lint 工具、静态分析工具、安全扫描器等
- 前提假设：列出验证时的环境、忽略规则与已知限制

# 验证方法
说明所使用的方法和规则集，包括但不限于：
- Lint（代码风格、命名、注释要求）
- 静态分析（潜在空指针、资源泄露、并发风险）
- 安全扫描（常见漏洞、依赖安全性）
- 契约比对（接口/契约与规范的一致性）
- 自定义规则/插件（列出自定义规则集位置）

# 验证结果总览
- 验证规则总数：待填写
- 命中违规总数：待填写
- 通过规则数：待填写
- 总体通过率：待填写

## 违规统计（按严重度）
- 阻塞（Blocker）：N 条
- 严重（Critical）：N 条
- 中等（Major）：N 条
- 轻微（Minor）：N 条

# 违规清单
下面以表格或 YAML 列出违规，便于人工阅读与机器解析。可同时提供两种格式（表格为人读，YAML 便于机器）。

## 表格视图（示例）
| ID | 规则 | 描述 | 位置/文件 | 严重度 | 建议修复 | 推荐 new_task 模板 |
| --- | --- | --- | --- | --- | --- | --- |
| V-001 | no-trailing-whitespace | 文件末尾存在多余空白 | src/foo/bar.py:120 | Minor | 删除行尾空白 | see below |

## 结构化 YAML（机器可解析）
violations:
  - id: V-001
    rule: no-trailing-whitespace
    description: 文件末尾存在多余空白
    location: src/foo/bar.py:120
    severity: Minor
    fix: 删除行尾空白
    suggested_new_task:
      mode: code
      title: 修复尾部空白 V-001 - src/foo/bar.py
      todos:
        - "[ ] 修复文件尾部空白"
        - "[ ] 执行 lint 验证"
        - "[ ] 提交 PR 并关联此报告"

# 规则命中示例
对若干典型违规给出命中时的代码片段、定位信息与改进建议。

## 示例：命名不规范（示例）
违规 ID: V-010
位置: src/module/example.py:45
```python
# 违规示例
def myFunc():
    pass
```
建议修改：
```python
# 建议示例
def my_function():
    pass
```

# 重大违规与阻塞判定
说明哪些违规视为阻塞（Blocker），例如：
- 导致系统崩溃或数据丢失的缺陷
- 违反安全策略导致高概率的敏感信息泄露
- 核心契约不匹配导致系统不可用
对每类阻塞给出判定准则与示例。

# 修复建议与优先级
为每个违规给出建议修复步骤并标注优先级（P0/P1/P2）。
- 优先级判定：P0=阻塞且必须在本次迭代修复；P1=重要但可排期；P2=建议优化

## 可复制 new_task 修复模板（mode: code）
下面给出可直接复制到 Roo new_task 的 XML 模板（mode: code），请按需替换占位符后提交：
```xml
<new_task>
<mode>code</mode>
<message>修复违规 {violation_id}：{简短描述}</message>
<todos>
[ ] 分析违规位置（{location}）
[ ] 实施修复并本地运行所有相关测试
[ ] 运行 Spec-Verifier 验证并更新报告引用
[ ] 提交 PR 并链接本规范检查报告
</todos>
</new_task>
```

## 可复制 new_task 修复模板（mode: spec-designer）
```xml
<new_task>
<mode>spec-designer</mode>
<message>更新规范以修复 {violation_id}：{简短描述}</message>
<todos>
[ ] 明确规范变更范围
[ ] 更新规范文档并示例化
[ ] 与 ArchSpec-Manager 协商并达成一致
[ ] 提交规范变更并更新本报告
</todos>
</new_task>
```

# 验证覆盖率或规则集
- 列出当前启用的规则集与版本
- 指出尚未覆盖的规则或已知限制（例如：第三方库检查有限）

# 结论与验收建议
- 是否合格：待填写（合格/不合格/有条件合格）
- 若需修复：列出必须修复的阻塞项与建议验收标准

# 产出清单
- 规范检查报告（本文件）
- 违规明细（YAML/CSV/表格文件路径）
- 工具输出：Spec-Verifier 输出路径（例如：artifacts/spec-verifier/output-YYYYMMDDHHMMSS）

# 参考文档
- [`docs/articles/开发流程设计.md`](docs/articles/开发流程设计.md:1)
- [`docs/articles/AITASK项目工程文件目录结构.md`](docs/articles/AITASK项目工程文件目录结构.md:1)
- Roo 指南：
  - [`roo/system-prompt-spec-verifier`](roo/system-prompt-spec-verifier:1)
  - [`roo/system-prompt-archspec-manager`](roo/system-prompt-archspec-manager:1)

# 变更记录与模板维护信息
- 作者: Spec-Verifier
- 模板版本: 1.0
- 最后更新: 2025-08-28T07:57:43+08:00
- 联系方式: roo@local or see [`roo/system-prompt-spec-verifier`](roo/system-prompt-spec-verifier:1)

# 示例填充
以下为 1-2 个示例违规与修复流程示例，供参考。

## 示例 1
- ID: V-001
- 规则: no-trailing-whitespace
- 描述: 文件末尾多余空白导致 lint 失败
- 位置: src/foo/bar.py:120
- 严重度: Minor
- 建议修复: 删除行尾空白并运行 lint
- 推荐 new_task: 使用上文 mode: code 模板创建修复任务

## 示例 2
- ID: V-020
- 规则: insecure-dependency
- 描述: 依赖中存在高危已知漏洞
- 位置: package-lock.json (依赖 tree)
- 严重度: Critical
- 建议修复:
  1. 升级到安全版本
  2. 运行回归测试
  3. 若无法升级，提交风险接受说明并加固
- 推荐 new_task: 使用 mode: spec-designer 模板创建规范或依赖变更任务

---
模板说明：
- 文件编码：UTF-8（无 BOM），换行 LF
- 使用说明：将本模板复制到项目对应 AITASK 目录，填充具体结果并在产出清单中添加实际 artifact 路径
- 保养：模板由 Spec-Verifier 维护，任何变更请在变更记录中登记