# 通用测试规范

## 概述
规范AI在项目中进行测试的标准流程，确保测试行为规范化、可追溯，避免任意测试。

## 核心原则

### 1. 规范优先原则
**要求**：AI不能任意测试，必须先查询测试规范
**流程**：
1. 搜索 `docs/SPEC/TEST/` 目录下相关规范
2. 如有规范，严格按规范执行
3. 如无规范，必须询问用户测试方式
4. 获得用户明确确认后方可测试

### 2. 最小影响原则
**要求**：测试不得影响生产环境
**规范**：
- 测试代码与生产代码隔离
- 测试后必须清理所有副作用
- 不得修改生产配置文件

### 3. 可验证原则
**要求**：所有测试结果必须可验证
**规范**：
- 测试输出必须有明确标识
- 提供测试通过/失败的判断标准
- 记录完整的测试日志

## 测试前检查清单

### 规范查询
```bash
# 查询是否有相关测试规范
find docs/SPEC/TEST -name "*.md" -exec grep -l "功能名称" {} \;
```

### 环境确认
- [ ] 测试环境已就绪
- [ ] 生产数据已备份
- [ ] 测试范围已明确
- [ ] 回滚方案已准备

### 用户确认
如无规范，必须询问：
1. 测试目标是什么？
2. 测试方法如何？
3. 预期结果怎样？
4. 是否需要特殊环境？

## 测试执行规范

### 测试类型
1. **功能测试**：验证单个功能点
2. **集成测试**：验证模块间交互
3. **回归测试**：验证修改未引入新问题

### 测试方法
1. **单元测试**：测试单个函数/类
2. **模块测试**：测试完整模块
3. **端到端测试**：测试完整流程

### 测试输出规范
```
[TEST] [时间] [模块] [类型] [状态] [消息]
[TEST] 2024-08-23 15:30:00 Auth功能 PASS 登录验证通过
[TEST] 2024-08-23 15:30:01 Auth功能 FAIL 密码验证失败
```

## 测试后处理

### 结果记录
- 记录测试时间、环境、结果
- 保存测试日志到指定位置
- 生成测试报告

### 环境清理
- 删除测试代码
- 清理测试数据
- 恢复环境配置
- 验证清理完成

### 用户反馈
- 报告测试结果
- 说明发现的问题
- 提供修复建议
- 等待用户下一步指示