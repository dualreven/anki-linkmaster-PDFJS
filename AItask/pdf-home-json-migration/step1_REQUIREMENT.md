# PDF主页JSON标准迁移需求分析

## 项目背景
当前PDF主页使用旧的JSON通信格式，需要根据新的JSON通信标准进行升级，确保前后端数据互通的一致性和可维护性。

## 当前实现分析
- 文件位置：`src/frontend/pdf-home/index.js`
- 当前格式：简化格式，缺少request_id和标准化响应结构
- 消息类型：基本消息类型支持

## 新标准要求
1. **消息结构标准化**
   - 所有消息必须包含：type, timestamp, request_id
   - 响应消息必须包含：status, code, message, data

2. **向后兼容性**
   - 支持新旧格式并存
   - 逐步迁移策略

3. **错误处理升级**
   - 统一错误响应格式
   - 标准错误码和消息

4. **消息追踪**
   - request_id用于请求-响应对应
   - 支持异步操作追踪

## 迁移范围
- WebSocket消息发送格式
- WebSocket消息接收处理
- 错误处理和用户提示
- 消息类型定义

## 技术约束
- 保持现有功能不变
- 最小化用户界面变化
- 确保向后兼容性
- 支持逐步回滚

## 质量标准
- 所有消息格式符合JSON标准
- 错误处理覆盖所有边界情况
- 向后兼容性测试通过
- 性能影响最小化