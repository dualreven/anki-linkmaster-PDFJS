# 开发需求文档 - 迭代修复

## 任务概述
基于审查结果，进一步修复 `src/frontend/pdf-home` 模块的规范违反问题，确保规范覆盖率达到100%。

## 审查发现的问题
1. **PDFManager 构造函数中存在未使用的 websocketManager 参数**
   - 文件: `src/frontend/pdf-home/modules/pdf-manager.js`
   - 问题: 构造函数第20行保留未使用的 `websocketManager` 参数，违反 PDFHOME-ARCH-DESIGN-001 规范
   - 要求: 完全移除未使用的参数，彻底消除直接依赖痕迹

2. **WebSocket 消息处理中直接调用处理器**
   - 文件: `src/frontend/pdf-home/modules/ws-client.js`
   - 问题: `handleMessage` 方法第187-192行在事件总线分发后直接调用消息处理器
   - 要求: 移除直接调用处理器的代码，完全依赖事件总线进行消息分发

## 修正要求
1. 移除 `pdf-manager.js` 中未使用的 `websocketManager` 参数
2. 修改 `ws-client.js` 的 `handleMessage` 方法，确保所有 WebSocket 消息完全通过事件总线分发
3. 保持功能完整性和向后兼容性
4. 确保所有修改符合相关规范要求

## 预期输出
- 修正后的代码文件
- 规范覆盖率达到100%
- 详细的修改记录

## 工作目录
- 源代码路径: `src/frontend/pdf-home/`
- 日志目录: `AITASK/pdf-home/提升规范覆盖率/`

## 时间戳
20250825224008