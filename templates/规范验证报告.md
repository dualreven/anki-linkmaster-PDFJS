---
title: 规范验证报告（模板）
author: Spec-Verifier
file_version: 1.0
input:
  - AITASK/[序号-项目名]/v[版本号]/[YYYYMMDDhhmmss]-规范说明.md
  - AITASK/[序号-项目名]/v[版本号]/[YYYYMMDDhhmmss]-代码工件路径
usage: 记录规范验证的最终结果、违规清单、优先级与修复建议，供 ArchSpec-Manager 与 Group-Job-Manager 使用
---

# 概要
验证结论摘要：<填写>
总体规则通过率：<通过数>/<总规则数>（<百分比>%）

# 输入与前提
- 被验证规范说明：`AITASK/...`（请列出具体路径）
- 代码工件版本/提交：<commit hash / 构建号>
- 验证工具与版本：<工具链与版本>
- 验证时间窗口：<起 - 止>
- 受限条件与前提假设：<例如：依赖第三方库版本、规则覆盖范围等>

# 验证方法
- 工具链：列出用于静态分析、规则引擎、脚本的工具及版本
- 规则集来源：内置规则 / 自定义规则目录
- 自动化判定逻辑：例如阈值、白名单/黑名单、人工复核触发条件
- 人工复核策略：哪些违规需人工确认

# 验证统计
- 总规则数：<int>
- 通过：<int>
- 不通过：<int>
- 无法判定（需人工复核）：<int>

# 违规明细
下表为结构化违规清单（机器与人工均可消费）。也可同时提供 YAML/JSON 导出。

| 违规ID | 规则 | 描述 | 文件/位置 | 严重度 | 证据片段 | 建议修复 |
|---|---|---|---|---:|---|---|
| V-001 | 规则标识/名称 | 简要描述违规内容 | `path/to/file:line` | P0/P1/P2 | ```代码或日志片段``` | 简短修复建议 |

示例（YAML 格式）：
```yaml
- id: V-001
  rule: RULE-NAME-001
  description: "禁止使用 xxx 接口，因其存在安全风险"
  location:
    - path: AITASK/001-example/v1/src/module/file.js
      line: 123
  severity: P0
  evidence: |
    const secret = getSecret();
  recommendation: "替换为安全接口 yyy；增加参数校验"
```

# 重大违规识别
- 列出所有阻塞性（Blocker）违规，说明为何阻塞以及建议处理办法
- 对每项阻塞性违规给出是否需立即停止交付/合并的建议

# 修复建议与优先级
- 优先级评定（示例）：P0（阻断）/P1（高）/P2（中）/P3（低）
- 每条违规给出修改要点、回归测试要点、验证脚本或规则变更建议

## 快速创建修复子任务（可复制用于自动化）
下方为可复制的 [`new_task`](kilocode/new_task:1) XML 片段示例，用于在任务系统中自动创建修复子任务：
```xml
<new_task>
<mode>code</mode>
<message>修复违规 V-001: RULE-NAME-001 — 替换不安全接口并补充单元测试</message>
<todos>
[ ] 在受影响文件中替换不安全接口
[ ] 添加/更新单元测试覆盖相关逻辑
[ ] 运行验证工具并提交验证报告
</todos>
</new_task>
```

# 可复现示例与修复建议代码片段
- 示例违规代码片段（复制到临时工程以复现）
```javascript
// 违规示例
const token = getTokenFromUrl(); // 不安全：token 暴露于 URL
```
- 建议修复：
```javascript
// 修复建议
const token = secureStore.get('auth_token');
```

# 验证覆盖限制与未覆盖规则说明
- 明确列出验证工具无法覆盖的规则或场景（例如运行时安全、动态生成代码等）
- 给出规避策略或人工复核建议

# 结论与验收建议
- 验收结论（接受 / 接受但需修复 / 拒绝并返工）
- 建议后续动作与验收门禁（如再验证、人工复核清单）

# 产出清单
- 报告文件：本报告（[`templates/规范验证报告.md`](templates/规范验证报告.md:1)）
- 违规明细文件：`spec-violations.yaml`（或 `spec-violations.csv`）
- 工具输出：验证工具的原始输出目录（列出路径）

# 参考文档与模板维护信息
- 参考：[`docs/articles/开发流程设计.md`](docs/articles/开发流程设计.md:1)
- 参考：[`docs/articles/AITASK项目工程文件目录结构.md`](docs/articles/AITASK项目工程文件目录结构.md:1)
- kilocode 指南：[`kilocode/system-prompt-spec-verifier`](kilocode/system-prompt-spec-verifier:1), [`kilocode/system-prompt-archspec-manager`](kilocode/system-prompt-archspec-manager:1)
- 模板作者：Spec-Verifier
- 联系：spec-verifier@your-org.example
- 模板更新时间：<YYYY-MM-DD hh:mm:ss>

# 示例填充
## 示例 1：禁止使用同步 IO （V-002）
- 违规描述：在服务主循环中使用同步文件读写，导致阻塞。
- 证据：`server.js:456`
- 修复流程：
  1. 创建修复子任务（复制并修改上文 [`new_task`](kilocode/new_task:1) 模板）
  2. 替换为异步 API 并添加回归测试
  3. 运行验证工具，更新违规状态

## 示例 2：未做输入校验导致 SQL 注入风险（V-003）
- 违规描述：直接拼接 SQL 字符串
- 证据片段：
```sql
SELECT * FROM users WHERE id = ' " + userId + " ';
```
- 修复建议：使用参数化查询或 ORM 安全接口；新增单元测试覆盖异常输入

---
说明：
- 文件编码：UTF-8（无 BOM）
- 换行：LF（Unix 风格）
- 请在使用时替换 YAML header 中的 input 与模板更新时间字段