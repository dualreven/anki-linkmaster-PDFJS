智能体间持续沟通规则:
  描述:
    - 该规则定义智能体间基于文档的持续沟通与协商流程，确保多智能体在任务执行中能就事实、规范和合理性达成共识。
    - 一轮对话的开始为一个主题首次提出，结束为该主题达成一致或升级至人工会商。 
    - 每轮对话必须使用单一YAML文件作为该轮唯一真源。文件内按消息序列记录所有参与方发言，能区分不同发言者并支持多智能体并发参与。
  文件约定: 文件为一个 YAML 列表或对象，包含 metadata 与 messages 两部分；每条消息为一个条目，结构参照下方示例。
  示例格式_每轮一个文件:
    # 文件名: R-20250830-0001.yaml
    metadata:
      is_closed: false
      round_id: "R-20250830-0001"
      project: "项目名"
      initiator: "agent-master"           # 发起方 id
      required_participants: ["agent-fact-review","agent-spec-review"]        
      created_at: "2025-08-30T12:00:00Z"
      version: 1
      references: []
      consensus:
        achieved: false
        achieved_at: null
        agreements: []
    unresolved_items: []
    messages:
      - user-name: agent-master
        role: 主智能体
        topic: "今晚吃什么?"
        reply_id: "001"
        reply_content: |
          我认为意大利面就该拌42号混凝土
        links:
          - www.baidu.com
          - www.zhihu.com
          - "@src\\frontend\\pdf-home\\docs\\SPEC\\"
        timestamp: "2025-08-30T12:00:00Z"
        opinion: null                # agree|disagree|partial (由被请求方在其回复中填写)
        changes_requested: []
      - user-name: agent-fact-review
        role: 事实复核
        topic: "今晚吃什么?"
        reply_id: "002"
        reply_content: |
          我不同意：42号混凝土不可食用，建议改为番茄酱意面并给出证据。
        links:
          - https://example.com/concrete-hazards
        timestamp: "2025-08-30T12:30:00Z"
        opinion: "disagree"
        changes_requested:
          - "将‘拌42号混凝土’改为‘使用番茄酱’并附来源"
      # 更多消息条目...继续追加
  规则流程:
    - 发起: initiator 创建该轮 YAML 文件并通过 new_task 将文件路径传给 required_participants。
    - 回复: 参与者在同一文件的 messages 列表中追加回复条目，回复必须包含 user-name, role, reply_id, reply_content, timestamp, opinion（若为审阅者）和 changes_requested（如有）。
    - 识别与修改: 若有 changes_requested，initiator 在同一文件追加新的消息条目说明已接受修改或反驳理由，并更新 metadata.version，然后再次通知参与者。
    - 结束条件: 当 initiator 与所有 required_participants 的最新 opinion 均为 agree，则将 is_closed 设为 true 并记录 consensus 信息，表示该轮沟通成功。
  多方并发与冲突处理:
    - 支持多智能体并发回复；每条消息必须有唯一 reply_id 与精确 timestamp。
    - 若存在互斥的 changes_requested，应在 messages 中由提出方给出 rationale 与证据链接；initiator 可调用 agent-master 或发起人工同步仲裁。
  可追溯性与安全:
    - 所有引用必须放入 links 或 metadata.references，且每次修改需在 metadata.version 中递增并记录修改摘要。
    - 禁止将明文凭证或敏感密钥写入对话文件；如需敏感数据，使用受控存储并在 metadata 中标明访问策略。
  适用对象:
    - 该规则适用于 project-vise-manager、agent-master、agent-fact-review、agent-spec-review、agent-rationality-review 以及其它需要基于文档对话协商的智能体。
